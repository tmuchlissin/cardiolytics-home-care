{% extends "base.html" %} {% block content %}
<style>
  /* CSS kustom untuk alignment */
  .table-cell-center {
    text-align: center;
    vertical-align: middle;
  }
  .btn-center {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
</style>

<div class="px-5 py-1">
  <h1 class="text-2xl font-bold mb-4">User Approval</h1>

  {% if pending_users %}
  <div class="overflow-hidden rounded-xl">
    <table
      class="min-w-full bg-white border border-gray-200 shadow-md rounded text-center"
    >
      <!-- Table Head -->
      <thead class="bg-gray-50">
        <tr>
          <th
            scope="col"
            class="py-2 px-6 text-xs font-bold text-gray-600 uppercase border-b border-gray-200 table-cell-center"
          >
            Patient ID
          </th>
          <th
            scope="col"
            class="py-2 px-6 text-xs font-bold text-gray-600 uppercase border-b border-gray-200 table-cell-center"
          >
            Full Name
          </th>
          <th
            scope="col"
            class="py-2 px-6 text-xs font-bold text-gray-600 uppercase border-b border-gray-200 table-cell-center"
          >
            Email
          </th>
          <th
            scope="col"
            class="py-2 px-6 text-xs font-bold text-gray-600 uppercase border-b border-gray-200 table-cell-center"
          >
            Registered At
          </th>
          <th
            scope="col"
            class="py-2 px-6 text-xs font-bold text-gray-600 uppercase border-b border-gray-200 table-cell-center"
          >
            Status
          </th>
          <th
            scope="col"
            class="py-2 px-6 text-xs font-bold text-gray-600 uppercase border-b border-gray-200 table-cell-center"
          >
            Actions
          </th>
        </tr>
      </thead>
      <!-- Table Body -->
      <tbody class="divide-y divide-gray-300 text-sm">
        {% for user in pending_users %}
        <tr class="odd:bg-blue-50 even:bg-white hover:bg-gray-100">
          <td class="py-2 px-6 border-gray-200 table-cell-center">
            <span
              class="inline-block px-3 py-1 text-xs font-semibold rounded-full"
            >
              {{ user.id }}
            </span>
          </td>
          <td class="py-2 px-6 border-gray-200 table-cell-center">
            <span
              class="inline-block px-3 py-1 text-xs font-medium rounded-full"
            >
              {{ user.full_name }}
            </span>
          </td>
          <td class="py-2 px-6 border-gray-200 table-cell-center">
            <span
              class="inline-block px-3 py-1 text-xs font-medium rounded-full"
            >
              {{ user.email }}
            </span>
          </td>
          <td class="py-2 px-6 border-gray-200 table-cell-center">
            <span
              class="inline-block px-3 py-1 text-xs font-medium rounded-full"
            >
              {{ user.created_at }}
            </span>
          </td>
          <!-- Kolom Status dengan Badge -->
          <td class="py-2 px-6 border-gray-200 table-cell-center">
            {% if user.approved is none %}
            <span
              class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-600"
            >
              Pending
            </span>
            {% elif user.approved %}
            <span
              class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-600"
            >
              Approved
            </span>
            {% else %}
            <span
              class="inline-block px-3 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-600"
            >
              Rejected
            </span>
            {% endif %}
          </td>
          <!-- Kolom Actions -->
          <td class="py-2 px-6 border-gray-200 table-cell-center">
            <form
              method="POST"
              action="{{ url_for('admin.approve_user', user_id=user.id) }}"
            >
              <button
                type="submit"
                class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded shadow btn-center gap-2"
              >
                <!-- Heroicons Check Icon -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M5 13l4 4L19 7"
                  />
                </svg>
                <span>Approve</span>
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <p class="text-gray-600">No pending user approvals.</p>
  {% endif %}
</div>
{% endblock %}
